<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tell Me What To Do</title>
    <style>
        :root {
          --light-blue: #9090FF;
          --dark-blue: #2647FF;
          --green: #4CAF50;
          --red: #920000;
          --orange: #FFA500;
          --white: #FFFFFF;
          --black: #000000;
        }

        body {
          margin: 0;
          font-family: sans-serif;
          color: var(--black);
        }

        .screen {
          display: none;
          background: var(--light-blue);
          height: 100vh;
          width: 100vmin;
          margin: 0 auto;
          border: .2vmin solid var(--black);
          border-radius: 1vmin;
          top: 0;
          left: 0;
          z-index: 1;
          padding: 0;
        }
        .active {
          display: block;
        }

        .task-form {
          height: 86vh;
          width: 100vmin;
          display: flex;
          flex-direction: column;
        }

        .p-task-list {
          height: 86vh;
          width: 100vmin;
          display: flex;
          flex-direction: column;
        }

        label {
          font-size: 1.5vh;
        }

        h1, h2 {
          margin-top: 0;
          padding-top: .5vh;
          padding-left: 2vmin;
          padding-bottom: .5vh;
          text-align: left;
          background: var(--black);
          color: var(--white);
          height: 4vh;
          font-size: 3vh;
        }

        .large-bold-text {
          text-align: center;
          font-size: 3.5vh;
          font-weight: bold;
          margin: 5vmin 0;
          color: var(--black);
        }

        /* Go button */
        .go-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 0 auto 4vmin auto;
          width: 50vmin;
          height: 50vmin;
          border-radius: 50%;
          background: var(--red);
          border: .8vmin solid var(--black);
          color: var(--white);
          font-size: 4vmin;
          font-weight: bold;
          cursor: pointer;
          transition: background 0.2s;
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          user-select: none;
        }
        .go-btn:active {
          background: #b30000;
        }
        .go-btn.hidden {
          display: none;
        }

        /* Action buttons */
        .action-btn {
          background: var(--dark-blue);
          color: var(--white);
          border: .3vmin solid var(--black);
          padding: 1.5vmin 3vmin;
          border-radius: 1vmin;
          margin: 1vh .3vw;
          font-weight: bold;
          cursor: pointer;
          font-size: 2vh;
          line-height: 1vh;
          height: 5vh;
          transition: background 0.2s;
        }
        .action-btn:active {
          background: #1a34b8;
        }

        /* Controls */
        .control {
          border: .3vmin solid var(--black);
          background: var(--light-blue);
          color: var(--black);
          border-radius: 1vmin;
          padding: 1.5vmin;
          margin: 1.5vmin 0;
          font-size: 1.5vh;
        }

        .time-ctl {
          font-size: 1.5vh;
        }

        input[type="text"], input[type="number"], select, input[type="time"]{
          border: .3vmin solid var(--black);
          background: var(--white);
          color: var(--black);
          border-radius: .8vmin;
          padding: 1vmin;
          font-size: 1.5vh;
        }

        input[type="checkbox"] {
          accent-color: var(--black);
          width: 2vh;
          height: 2vh;
          margin-right: .8vw
        }
        .control-btn {
          background: var(--dark-blue);
          color: var(--white);
          border: .3vmin solid var(--black);
          padding: .8vh;
          border-radius: 1vmin;
          margin: 0 .3vw;
          font-weight: bold;
          cursor: pointer;
          font-size: 1.5vh;
          transition: background 0.2s;
        }
        .control-btn:active {
          background: #1a34b8;
        }

        /* Action bar at bottom */
        .action-bar {
          display: flex;
          justify-content: center;
          position: absolute;
          margin: 0 auto;
          top: 93vh;
          height: 7vh;
          width: 100vmin;
          gap: .2vmin;
        }

        /* Task list styles */
        .task-list {
          position.absolute;
          overflow-y: auto;
          margin: 3vmin auto 1.6vmin auto;
          width: 90vmin;
          display: flex;
          flex-direction: column;
          gap: 0vh;
          border: .2vmin solid var(--black);
          border-radius: 1.2vmin;
          padding: .4vmin;
        }
        .task-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          border: .2vmin solid var(--black);
          border-radius: 1.2vmin;
          padding: 0;
          font-size: 2vh;
          color: var(--white);
          background: var(--green);
          min-width: 0;
          gap: 1.6vmin;
          position: relative;
        }
        .task-item.status-red {
          background: var(--red);
        }
        .task-item.status-orange {
          background: var(--orange);
        }
        .task-item .task-desc {
          flex: 1;
          margin-left: .8vmin;
          text-align: left;
          padding-top:1.6vmin;
          padding-bottom:1.6vmin;
          overflow-wrap: anywhere;
          cursor: pointer;
        }
        .task-item .task-status {
          font-weight: bold;
          padding: 1.6vmin .8vmin 1.6vmin .8vmin;
          text-align: right;
          min-width: 6.0vmin;
        }
        .task-item .list-checkbox {
          margin:1.6vmin .2vmin 1.6vmin 1.6vmin;
        }
        .uuid-field {
          display: none;
        }

        /* Dependency list */
        .dependency-list {
          position.absolute;
          overflow-y: auto;
          margin: .8vmin 0;
          gap: 0vh;
          border: .2vmin solid var(--black);
          border-radius: 1.2vmin;
          padding: .4vmin;
        }
        .dependency-item {
          display: flex;
          align-items: center;
          border: .2vmin solid var(--black);
          border-radius: 1.0vmin;
          background: var(--dark-blue);
          color: var(--white);
          padding: 1.0vmin;
          font-size: 2vh;
          gap: 1.0vmin;
        }

        /* Bottom bar for add/edit */
        .bottom-bar {
          display: flex;
          justify-content: center;
          position: absolute;
          margin: 0 auto;
          top: 93vh;
          height: 7vh;
          width: 100vmin;
          gap: .2vmin;
        }

        /* Modal Dialog */
        .modal-overlay {
          position: fixed;
          top: 0; left: 0;
          width: 100vw; height: 100vh;
          background: rgba(0,0,0,0.35);
          z-index: 1000;
          display: none;
          align-items: center;
          justify-content: center;
        }

        .modal {
          background: var(--light-blue);
          color: var(--black);
          border: .2vmin solid var(--black);
          border-radius: 1.6vmin;
          min-width: 20vmin;
          max-width: 90vmin;
          padding: 3.2vmin 2.4vmin 2.4vmin 2.4vmin;
          box-sizing: border-box;
          box-shadow: 0 .8vmin 3.2vmin rgba(0,0,0,0.15);
          z-index: 1001;
          display: flex;
          flex-direction: column;
          align-items: center;
        }
        .modal-title {
          font-size: 3vh;
          font-weight: bold;
          margin-bottom: 1.6vmin;
        }
        .modal-body {
          margin-bottom: 2.4vmin;
          text-align: left;
          font-size: 2vh;
          white-space: pre-line
        }
        .modal-btn {
          padding: 1.0vmin 2.8vmin;
          border: .2vmin solid var(--black);
          border-radius: .8vmin;
          background: var(--dark-blue);
          color: var(--white);
          font-weight: bold;
          cursor: pointer;
          margin: 0 .8vmin;
          font-size: 1.5vh;
        }

        #task-desc {
            width: 100%;
            min-height: 8vmin;
            font-size: 1.5vh;
            border-radius: .8vmin;
            border: .3vmin solid var(--black);
            padding: 1vmin;
            box-sizing: border-box;
            resize: vertical;
        }
    </style>
</head>
<body>
<!-- Main Screen -->
<div id="main-screen" class="screen active">
    <h1>Tell Me What To Do</h1>
    <div class="large-bold-text" id="main-task-text">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        Vivamus mollis pharetra tellus vitae rutrum. Curabitur
        consectetur sollicitudin turpis. Fusce id dui leo. Quisque
        sed lacinia felis, vel aliquam quam. Sed eu porta felis.
        Fusce aliquam felis lorem, hendrerit luctus nisl luctus vel.
        Curabitur libero tortor, tristique sed imperdiet vel, pulvinar.
    </div>
    <div class="go-btn" id="go-btn">OK, I'M READY</div>
    <div class="action-bar">
        <button class="action-btn" onclick="addTask()">ADD TASK</button>
        <button class="action-btn" onclick="viewTasks()">VIEW TASKS</button>
        <button class="action-btn" onclick="showScreen('settings-screen')">SETTINGS</button>
    </div>
</div>

<!-- View Tasks Screen -->
<div id="view-tasks-screen" class="screen">
    <h2>View Tasks</h2>
    <div class="p-task-list">
        <div class="task-list" id="task-list">
        </div>
    </div>
    <div class="action-bar">
        <button class="action-btn" onclick="requeueTasks()">REQUEUE</button>
        <button class="action-btn" onclick="deleteTasksCheck()">DELETE</button>
        <button class="action-btn" onclick="addTask()">ADD</button>
        <button class="action-btn" onclick="showScreen('main-screen')">HOME</button>
    </div>
</div>

<!-- Add/Edit Task Screen -->
<div id="add-edit-screen" class="screen">
    <h2 id="add-edit-heading">Add Task</h2>
    <form id="task-form" autocomplete="off" class="task-form">
        <label for="task-desc">Description</label><br>
        <textarea id="task-desc" name="task-desc" class="text-area" rows="3" maxlength="256" style="width:100%;"></textarea><br>

        <label for="task-priority">Priority</label><br>
        <select id="task-priority" name="task-priority">
            <option value="1">Low</option>
            <option value="2">Medium</option>
            <option value="4">High</option>
            <option value="64">Urgent</option>
        </select><br>

        <label><input type="checkbox" id="task-repeats"> This task repeats</label><br>
        <div id="repeat-section" style="display:none;">
            <label>Every</label>
            <input type="number" id="repeat-interval" min="1" max="999" style="width:6.0vmin;">
            <select id="repeat-type">
                <option value="1">Hour(s)</option>
                <option value="2">Day(s)</option>
                <option value="3">Week(s)</option>
                <option value="4">Month(s)</option>
                <option value="5">Year(s)</option>
            </select><br>

            <div id="repeat-weekday-section" style="display:none;">
                <label>On</label>
                <select id="repeat-weekday">
                    <option value="0">Any Day</option>
                    <option value="1">Sunday</option>
                    <option value="2">Monday</option>
                    <option value="3">Tuesday</option>
                    <option value="4">Wednesday</option>
                    <option value="5">Thursday</option>
                    <option value="6">Friday</option>
                    <option value="7">Saturday</option>
                </select>
            </div>

            <div id="repeat-month-section" style="display:none;">
                <label>In</label>
                <select id="repeat-month">
                    <option value="1">January</option>
                    <option value="2">February</option>
                    <option value="3">March</option>
                    <option value="4">April</option>
                    <option value="5">May</option>
                    <option value="6">June</option>
                    <option value="7">July</option>
                    <option value="8">August</option>
                    <option value="9">September</option>
                    <option value="10">October</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                </select>
            </div>

            <div id="repeat-day-section" style="display:none;">
                <label>On</label>
                <select id="repeat-day">
                    <option>Any Day</option>
                    <option>Last Day</option>
                    <option>1st</option>
                    <option>2nd</option>
                    <option>3rd</option>
                    <option>4th</option>
                    <option>5th</option>
                    <option>6th</option>
                    <option>7th</option>
                    <option>8th</option>
                    <option>9th</option>
                    <option>10th</option>
                    <option>11th</option>
                    <option>12th</option>
                    <option>13th</option>
                    <option>14th</option>
                    <option>15th</option>
                    <option>16th</option>
                    <option>17th</option>
                    <option>18th</option>
                    <option>19th</option>
                    <option>20th</option>
                    <option>21st</option>
                    <option>22nd</option>
                    <option>23rd</option>
                    <option>24th</option>
                    <option>25th</option>
                    <option>26th</option>
                    <option>27th</option>
                    <option>28th</option>
                    <option>29th</option>
                    <option>30th</option>
                    <option>31st</option>
                </select>
            </div>

            <div id="repeat-time-section" style="display:none;">
                <label>At</label>
                <input type="time" id="repeat-time" class="time-ctl">
                <button type="button" class="control-btn"
                        onclick="clearRepeatTime()">Clear Time
                </button>
            </div>

            <div id="repeat-between-section" style="display:none;">
                <label>Between</label>
                <input type="time" id="repeat-start-time" class="time-ctl">
                <label>and</label>
                <input type="time" id="repeat-end-time" class="time-ctl">
                <button type="button" class="control-btn"
                        onclick="clearRepeatTimes()">Clear Times
                </button>
            </div>
        </div>

        <div style="margin-top:2.4vmin;font-weight:bold;" id="dep-lbl">Only after these tasks are done<br><small>Select any tasks this task is dependent on.</small></div>
        <div class="dependency-list" id="dependency-list">
         </div>
        <div class="bottom-bar">
            <button type="button" class="action-btn" id="save-task-btn" onclick="saveTask()">SAVE</button>
            <button type="button" class="action-btn" onclick="addEditCancel()">CANCEL</button>
        </div>
    </form>
</div>

<!-- Settings Screen -->
<div id="settings-screen" class="screen">
    <h2>Settings</h2>
    <div style="width:100vmin;display:flex;flex-direction:row;align-items:center;gap:1.6vmin;margin-top:3.2vmin;justify-content: center;">
        <button class="action-btn" onclick="backupTasks()">BACKUP</button>
        <button class="action-btn" onclick="restoreTasks()">RESTORE</button>
        <button class="action-btn" onclick="showScreen('main-screen')">HOME</button>
    </div>
</div>

<!-- Modal dialog -->
<div id="modal-overlay" class="modal-overlay">
    <div class="modal" id="modal">
        <div class="modal-title" id="modal-title">Dialog Title</div>
        <div class="modal-body" id="modal-body">Dialog body text goes here.</div>
        <div id="modal-actions">
        </div>
    </div>
</div>

<input type="file" id="file-input" accept=".json" style="display:none;"/>

<script type="text/javascript" src="tmwtd.js"></script>
</body>
</html>